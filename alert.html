<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
body {
  background:transparent;
  color:white;
  font-family:Arial;
  text-align:center;
}
#box {
  display:none;
}
img {
  max-width:300px;
}
</style>
</head>

<body>

<div id="box">
  <img id="gif">
  <div id="text"></div>
  <audio id="audio"></audio>
</div>

<script>
function showAlert(name, amount) {
  const s = JSON.parse(localStorage.getItem("alert_settings"));
  if (!s) return;

  const box = document.getElementById("box");
  const gif = document.getElementById("gif");
  const text = document.getElementById("text");
  const audio = document.getElementById("audio");

  text.innerText = s.text
    .replace("{name}", name)
    .replace("{amount}", amount);

  text.style.fontSize = s.size + "px";
  text.style.color = s.color;

  gif.src = s.gif;
  audio.src = s.sound;

  box.style.display = "block";
  audio.play();

  setTimeout(() => box.style.display = "none", 6000);
}

setInterval(() => {
  const t = localStorage.getItem("alert_test");
  if (t) {
    localStorage.removeItem("alert_test");
    const d = JSON.parse(t);
    showAlert(d.name, d.amount);
  }
}, 500);
</script>

</body>
</html>
