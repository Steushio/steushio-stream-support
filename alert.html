<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Alert</title>

<style>
body {
  margin:0;
  background:transparent;
  overflow:hidden;
  font-family:Arial;
}
#alert {
  display:none;
  position:absolute;
  top:40%;
  width:100%;
  text-align:center;
}
#alert img {
  max-width:200px;
}
</style>
</head>

<body>

<div id="alert">
  <img id="gif">
  <div id="text"></div>
</div>

<audio id="sound"></audio>

<script>
setInterval(() => {
  const trigger = localStorage.getItem("triggerAlert");
  if (!trigger) return;

  localStorage.removeItem("triggerAlert");

  const data = JSON.parse(trigger);
  const settings = JSON.parse(localStorage.getItem("alertSettings"));

  if (!settings) return;

  const text = settings.text
    .replace("{name}", data.name)
    .replace("{amount}", data.amount);

  document.getElementById("text").textContent = text;
  document.getElementById("text").style.color = settings.color;
  document.getElementById("text").style.fontSize = settings.size + "px";

  document.getElementById("gif").src = settings.gif;

  const audio = document.getElementById("sound");
  audio.src = settings.sound;
  audio.play();

  const box = document.getElementById("alert");
  box.style.display = "block";

  setTimeout(() => box.style.display = "none", 6000);

}, 500);
</script>

</body>
</html>
