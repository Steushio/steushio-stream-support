<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Steushio Alert Control Panel</title>

<style>
body {
  background:#0b1020;
  color:white;
  font-family:Arial;
  padding:20px;
}
input, select, button {
  padding:8px;
  margin:6px 0;
  width:260px;
}
button {
  cursor:pointer;
}
</style>
</head>

<body>

<h2>ðŸŽ› Alert Control Panel</h2>

<label>Thank You Text</label><br>
<input id="thankText" value="â¤ï¸ {name} supported â‚¹{amount}"><br>

<label>Font Size</label><br>
<input type="number" id="fontSize" value="28"><br>

<label>Text Color</label><br>
<input type="color" id="textColor" value="#ffffff"><br>

<hr>

<label>Select Alert Sound</label><br>
<select id="alertSound"></select><br>

<label>Select Alert GIF</label><br>
<select id="alertGif"></select><br>

<br>
<button onclick="saveSettings()">Save Settings</button>
<button onclick="previewAlert()">Preview Alert</button>

<script>
document.addEventListener("DOMContentLoaded", () => {

  fetch("assets/assets.json")
    .then(r => r.json())
    .then(data => {

      const soundSelect = document.getElementById("alertSound");
      const gifSelect = document.getElementById("alertGif");

      soundSelect.innerHTML = "";
      gifSelect.innerHTML = "";

      data.sounds.forEach(s => {
        const opt = document.createElement("option");
        opt.value = s;
        opt.textContent = s.split("/").pop();
        soundSelect.appendChild(opt);
      });

      data.gifs.forEach(g => {
        const opt = document.createElement("option");
        opt.value = g;
        opt.textContent = g.split("/").pop();
        gifSelect.appendChild(opt);
      });

      // load saved settings
      const saved = JSON.parse(localStorage.getItem("alertSettings"));
      if (saved) {
        thankText.value = saved.text;
        fontSize.value = saved.size;
        textColor.value = saved.color;
        alertSound.value = saved.sound;
        alertGif.value = saved.gif;
      }

    })
    .catch(err => {
      alert("Failed to load assets.json");
      console.error(err);
    });

});

function saveSettings() {
  localStorage.setItem("alertSettings", JSON.stringify({
    text: thankText.value,
    size: fontSize.value,
    color: textColor.value,
    sound: alertSound.value,
    gif: alertGif.value
  }));
  alert("Saved");
}

function preview() {
  fetch("http://192.168.1.2:8000/webhook", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      name: "Test Supporter",
      amount: 100
  }));
}
</script>

</body>
</html>
