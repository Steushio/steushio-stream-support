<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Steushio Alert Control Panel</title>

<style>
  body {
    background:#0b1020;
    color:#fff;
    font-family:Arial, Helvetica, sans-serif;
    padding:30px;
  }
  h2 { margin-bottom: 10px; }
  label { display:block; margin-top:15px; }
  input, select, button {
    width:340px;
    padding:8px;
    margin-top:5px;
  }
  button {
    margin-top:15px;
    cursor:pointer;
  }
  small { color:#aaa; }
</style>
</head>

<body>

<h2>üéõÔ∏è Alert Control Panel</h2>

<label>Thank You Text</label>
<input id="text" value="‚ù§Ô∏è {name} supported ‚Çπ{amount}">
<small>Use <b>{name}</b> and <b>{amount}</b></small>

<label>Font Size</label>
<input type="number" id="fontSize" value="28">

<label>Text Color</label>
<input type="color" id="color" value="#ffffff">

<hr>

<label>Select Alert Sound</label>
<select id="sound"></select>

<label>Select Alert GIF</label>
<select id="gif"></select>

<button onclick="save()">Save Settings</button>
<button onclick="preview()">Preview Alert</button>

<script>
async function loadAssets() {
  const res = await fetch("assets/assets.json");
  const data = await res.json();

  const soundSel = document.getElementById("sound");
  const gifSel = document.getElementById("gif");

  soundSel.innerHTML = '<option value="">None</option>';
  gifSel.innerHTML = '<option value="">None</option>';

  data.sounds.forEach(path => {
    const name = path.split("/").pop();
    soundSel.innerHTML += `<option value="${path}">${name}</option>`;
  });

  data.gifs.forEach(path => {
    const name = path.split("/").pop();
    gifSel.innerHTML += `<option value="${path}">${name}</option>`;
  });

  // Load saved config if exists
  const saved = JSON.parse(localStorage.getItem("alertConfig"));
  if (saved) {
    text.value = saved.text;
    fontSize.value = saved.fontSize;
    color.value = saved.color;
    sound.value = saved.sound;
    gif.value = saved.gif;
  }
}

function save() {
  const cfg = {
    text: text.value,
    fontSize: fontSize.value,
    color: color.value,
    sound: sound.value,
    gif: gif.value
  };
  localStorage.setItem("alertConfig", JSON.stringify(cfg));
  alert("Saved! OBS will update instantly.");
}

function preview() {
  fetch("http://localhost:8000/webhook", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ name: "Test User", amount: 100 })
  });
}

loadAssets();
</script>

</body>
</html>
